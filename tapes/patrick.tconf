global {
    ducttape_output="/projects/tir4/users/pfernand/workflows-outputs/metaexpl-experiments/v1"
    ducttape_experimental_submitters=true
    ducttape_experimental_imports=true
    repo="/home/pfernand/repos/meta-expl"

    num_examples=(
        NumExamples:
            500=500
            1000=1000
            2000=2000
            4000=4000
    )

    # models and explainers parameters
    teacher_arch=electra
    student_arch=embedding

    teacher_explainer=(
        TeacherExplainer:
            attention="attention_explainer"
            hidden_qk="hidden_qk_explainer"
            attention_query="attention_query_explainer"
    )
    student_explainer="attention_explainer"

    # optimization paramaters
    num_epochs=""
    batch_size=16
    lr=5e-4
    kld_coeff=(
        KLDCoeff: 
            0=0
            1=1
    )
    patience=(
        NumExamples:
            500=40
            1000=30
            2000=20
    )

    # (meta) optimization parameters
    metalearn=(
        MetaLearn:
            false=false
            true=true
    )
    meta_lr=(
        MetaLR:
            1e2=1e-2
            1e3=1e-3
            5e4=5e-4
            1e4=1e-4
    )
    meta_interval=(
        MetaInterval:
            1=1
            10=10
            100=100
            1000=1000
    )
    meta_explicit=false

    seed=(
        Seed: 
            0=0
            1=1
            2=2
            3=3
            4=4
    )


    submitter=slurm
}

plan TrainTeacher {
    reach TrainTeacher
}

plan TrainStudent {
    reach AverageResults via (NumExamples: *) * (KLDCoeff: 0 1) * (TeacherExplainer: *)
}

plan MetaTrain {
<<<<<<< HEAD
    reach AverageResults via (NumExamples: *) * (KLDCoeff: 1) * (MetaLearn: true) * (TeacherExplainer: *) * (MetaLR: 5e4) * (MetaInterval: *)
}
=======
    #reach AverageResults via (NumExamples: 500 1000 2000) * (KLDCoeff: 1) * (MetaLearn: true) * (TeacherExplainer: softmax_param) * (StudentExplainer: softmax_param) * (MetaLR: 1e2 1e3) * (MetaInterval: 25 50)
    #reach AverageResults via (NumExamples: 500 1000 2000) * (KLDCoeff: 1) * (MetaLearn: true) * (TeacherExplainer: softmax_param) * (StudentExplainer: softmax_param) * (MetaLR: 1e3 1e4) * (MetaInterval: 1 5 10)
    #reach AverageResults via (NumExamples: 500 1000 2000) * (KLDCoeff: 1) * (MetaLearn: true) * (TeacherExplainer: entmax_param) * (StudentExplainer: entmax_param) * (MetaLR: 1e2 1e3) * (MetaInterval: 50)
}

plan ExplorePivot {
    reach AverageResults via (NumExamples: 500 1000 2000) * (KLDCoeff: 1) * (MetaLearn: true) * (TeacherExplainer: softmax_param) * (StudentExplainer: softmax_param) * (MetaLR: 1e2 1e3) * (MetaInterval: *) * (MetaInit: uniform) * (Pivot: *)
}
>>>>>>> 97ff60c7920c1eb4b4a3e1d174cc6d1a7e5da0fa
